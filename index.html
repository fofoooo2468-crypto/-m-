<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…Ø­Ù„Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© AI</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700" rel="stylesheet">
<style>
/* Ù†ÙØ³ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø¹Ø¬Ø¨Ùƒ */
:root{--bg:#f5ede3;--card:#ffffff;--border:#e0d6c8;--gold:#d7a562;--navy:#174766;--ink:#00080b;--radius:10px;--shadow:0 2px 6px rgba(0,0,0,.08);}
body{font-family:"Cairo",sans-serif;background:var(--bg);margin:0;padding:24px;color:var(--ink);}
.container{max-width:1100px;margin:auto;}
.panel,.task-card{background:var(--card);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:20px;}
textarea{width:100%;height:140px;padding:16px;border:2px solid var(--border);border-radius:var(--radius);font-family:inherit;font-size:15px;box-sizing:border-box;}
button{padding:12px 20px;border-radius:var(--radius);border:none;cursor:pointer;font-family:inherit;font-weight:600;font-size:14px;transition:all .3s;}
.btn-primary{background:var(--gold);color:white;}.btn-primary:hover{background:#c5944e;}
.btn-secondary{background:var(--navy);color:white;}.btn-secondary:hover{background:#12344e;}
.btn-ghost{background:transparent;border:2px solid var(--border);color:var(--navy);}.btn-ghost:hover{background:var(--navy);color:white;}
.actions{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap;}
table{width:100%;border-collapse:collapse;margin:16px 0;border-radius:var(--radius);overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,.1);}
th,td{border:1px solid var(--border);padding:12px;text-align:right;}
th{background:linear-gradient(135deg,#f8f4f0,#f1e8dc);font-weight:600;}
.warn{background:#ffebee;padding:12px;border-radius:8px;border-right:4px solid #d32f2f;margin:12px 0;color:#c62828;}
.ai-suggest{background:linear-gradient(135deg,#e3f2fd,#bbdefb);padding:16px;border-radius:12px;margin:12px 0;border-right:5px solid var(--navy);box-shadow:0 2px 8px rgba(23,71,102,.15);}
.approved{background:linear-gradient(135deg,#e8f5e8,#c8e6c9);padding:12px;border-radius:8px;margin:8px 0;border-left:4px solid #4caf50;}
.loading{text-align:center;padding:40px;color:var(--navy);font-size:16px;}
.spinner{display:inline-block;width:24px;height:24px;border:3px solid #e0e0e0;border-top:3px solid var(--navy);border-radius:50%;animation:spin 1s linear infinite;margin-right:12px;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
h3,h4{margin:0 0 16px 0;color:var(--navy);font-weight:600;}
.section-title{border-bottom:3px solid var(--gold);padding-bottom:8px;}
.token-input{width:300px;padding:10px;border:2px solid var(--border);border-radius:8px;font-family:inherit;font-size:14px;}
</style>
</head>
<body>
<div class="container">
  <div class="panel">
    <h3>ğŸ¤– Ù…Ø­Ù„Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© - Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h3>
    <textarea id="input" placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ù‡Ù†Ø§...&#10;Ù…Ø«Ø§Ù„: ØªÙ†Ø¸ÙŠÙ… ÙˆØªÙˆØ¬ÙŠÙ‡ ÙˆØªØ­ÙÙŠØ² Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ø¹Ù…Ø±Ø© Ø§Ù„ØªÙŠ ØªÙ…ÙƒÙ† Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø¹Ù…Ø±Ø© Ù…Ù† Ø§Ø¨ØªÙƒØ§Ø± Ø¨Ø±Ø§Ù…Ø¬ ÙˆØ¨Ø§Ù‚Ø§Øª Ù†ÙˆØ¹ÙŠØ©..."></textarea>
    <div class="actions">
      <button class="btn-primary" onclick="analyzeAI()">ğŸš€ ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ</button>
      <button class="btn-ghost" onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
    </div>
  </div>

  <div id="results"></div>
  
  <div class="task-card">
    <h3 class="section-title">âœ… Ø§Ù„ØµÙŠØ§ØºØ§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</h3>
    <div id="approvedList"></div>
  </div>
</div>

<script>
// Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©
const VERBS = ["ØªÙ†Ø¸ÙŠÙ…","ØªÙˆØ¬ÙŠÙ‡","ØªØ­ÙÙŠØ²","Ø¥Ø´Ø±Ø§Ù","Ù…ØªØ§Ø¨Ø¹Ø©","Ø±Ù‚Ø§Ø¨Ø©","ØªÙ†ÙÙŠØ°","ØªØ·ÙˆÙŠØ±","ØªÙ‚ÙŠÙŠÙ…","ØªÙ‚ÙˆÙŠÙ…","Ù‚ÙŠØ§Ø³","Ø§Ø¹ØªÙ…Ø§Ø¯","Ø¥Ù‚Ø±Ø§Ø±","ØªÙ†Ø³ÙŠÙ‚","Ù…Ø±Ø§Ù‚Ø¨Ø©","ØªÙØ¹ÙŠÙ„","Ø¯Ø¹Ù…","ØªØ´Ø¬ÙŠØ¹"];

// Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ù…Ø­Ù„ÙŠ - ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† API)
async function analyzeAI() {
  const input = document.getElementById("input").value.trim();
  const results = document.getElementById("results");
  
  if (!input) {
    alert("ğŸ“ Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ù…Ù‡Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹!");
    return;
  }
  
  // Loading
  results.innerHTML = '<div class="loading"><div class="spinner"></div><strong>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...</strong><br>ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£ÙØ¹Ø§Ù„ ÙˆØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª...</div>';
  
  // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± ÙˆØ§Ù‚Ø¹ÙŠ
  await new Promise(resolve => setTimeout(resolve, 2000));
  
  // ØªØ­Ù„ÙŠÙ„ Rule-based
  const verbs = extractVerbs(input);
  const domain = input;
  const isComposite = verbs.length > 1;
  
  // ØªÙˆÙ„ÙŠØ¯ Ù…Ù‚ØªØ±Ø­Ø§Øª Ø°ÙƒÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
  const aiTasks = generateSmartTasks(input, verbs, isComposite);
  
  displayResults(input, verbs, isComposite, aiTasks);
}

function extractVerbs(text) {
  return [...new Set(VERBS.filter(v => text.includes(v)))];
}

function generateSmartTasks(text, verbs, isComposite) {
  const tasks = [];
  
  if (isComposite && verbs.length > 1) {
    // ÙØµÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
    verbs.forEach((verb, index) => {
      tasks.push(createSmartTask(verb, text, index));
    });
  } else {
    // Ù…Ù‡Ù…Ø© Ù…ÙØ±Ø¯Ø© Ù…ÙƒØªÙ…Ù„Ø©
    const mainVerb = verbs[0] || "ØªÙ†Ø¸ÙŠÙ…";
    tasks.push(createSmartTask(mainVerb, text, 0));
  }
  
  return tasks;
}

function createSmartTask(verb, originalText, taskIndex) {
  // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø°ÙƒÙŠ Ù„Ù„Ù…Ø¬Ø§Ù„
  let domain = originalText.replace(new RegExp(`^${verb}\\s*`, 'i'), '').trim();
  if (!domain) domain = originalText;
  
  // Ø£Ø¯ÙˆØ§Øª Ø°ÙƒÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø³ÙŠØ§Ù‚
  let tool = getSmartTool(originalText, verb);
  let output = getSmartOutput(originalText, verb);
  
  const fullText = `${verb} ${domain} ${tool} Ù„ØªØ­Ù‚ÙŠÙ‚ ${output}`;
  
  return {
    verb,
    domain,
    tool,
    output,
    full: fullText
  };
}

function getSmartTool(text, verb) {
  if (text.includes("Ø¹Ù…Ø±Ø©") || text.includes("Ø­Ø¬")) return "Ù…Ù† Ø®Ù„Ø§Ù„ Ø£Ø·Ø± ØªÙ†Ø¸ÙŠÙ…ÙŠØ© ÙˆÙ…Ø¹Ø§ÙŠÙŠØ± ØªØ´ØºÙŠÙ„ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø©";
  if (text.includes("Ø´Ø±ÙƒØ§Øª") || text.includes("Ù…Ù†Ø´Ø¢Øª")) return "Ù…Ù† Ø®Ù„Ø§Ù„ Ø¨Ø±Ø§Ù…Ø¬ Ø¯Ø¹Ù… ÙˆØªÙØ¹ÙŠÙ„ ÙˆØªØ´Ø¬ÙŠØ¹";
  if (text.includes("ØªØ·ÙˆÙŠØ±") || text.includes("ØªØ­Ø³ÙŠÙ†")) return "Ù…Ù† Ø®Ù„Ø§Ù„ Ø¨Ø±Ø§Ù…Ø¬ ØªØ¯Ø±ÙŠØ¨ ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„ÙƒÙØ§Ø¡Ø§Øª";
  if (text.includes("ØªÙ‚ÙŠÙŠÙ…") || text.includes("Ù‚ÙŠØ§Ø³")) return "Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ø¤Ø´Ø±Ø§Øª Ø£Ø¯Ø§Ø¡ Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ø¯ÙˆØ±ÙŠØ©";
  return "Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø¢Ù„ÙŠØ§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©";
}

function getSmartOutput(text, verb) {
  if (text.includes("Ø¹Ù…Ø±Ø©") || text.includes("Ø­Ø¬")) return "ØªØ¹Ø²ÙŠØ² ØªØ¬Ø±Ø¨Ø© Ø¶ÙŠÙˆÙ Ø§Ù„Ø±Ø­Ù…Ù† ÙˆØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„ØªÙ†Ø§ÙØ³ÙŠ";
  if (text.includes("Ø´Ø±ÙƒØ§Øª") || text.includes("Ù…Ù†Ø´Ø¢Øª")) return "Ø±ÙØ¹ ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„ØªÙ†Ø§ÙØ³ÙŠØ© Ø§Ù„Ù…Ø³ØªØ¯Ø§Ù…Ø©";
  if (text.includes("ØªØ·ÙˆÙŠØ±")) return "ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø³ØªØ¯Ø§Ù…Ø© ÙˆØ§Ù„ØªÙ…ÙŠØ² Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ";
  if (text.includes("ØªÙ‚ÙŠÙŠÙ…")) return "Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©";
  return "ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù„Ù„Ù…Ù†Ø¸ÙˆÙ…Ø© ÙˆØ±ÙØ¹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ø§Ù…Ù„";
}

function displayResults(originalText, verbs, isComposite, aiTasks) {
  const results = document.getElementById("results");
  
  results.innerHTML = `
    <div class="task-card">
      <h4>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ</h4>
      <table>
        <tr><th>Ø§Ù„ÙØ¹Ù„</th><th>Ø§Ù„Ù…Ø¬Ø§Ù„</th><th>Ø§Ù„Ø£Ø¯Ø§Ø©</th><th>Ø§Ù„Ù…Ø®Ø±Ø¬</th></tr>
        <tr>
          <td style="background:#fff3e0"><strong>${verbs.join("ØŒ ") || "-"}</strong></td>
          <td>${originalText}</td>
          <td>-</td>
          <td>-</td>
        </tr>
      </table>
      <div class="warn">
        <strong>${isComposite ? 'ğŸ”´ Ø§Ù„Ù…Ù‡Ù…Ø© Ù…Ø±ÙƒØ¨Ø©' : 'ğŸŸ¢ Ø§Ù„Ù…Ù‡Ù…Ø© Ù…ÙØ±Ø¯Ø©'}</strong> 
        - ${verbs.length || 0} ÙØ¹Ù„ ØªÙ†Ø¸ÙŠÙ…ÙŠ ${isComposite ? 'â†’ Ø³ÙŠØªÙ… ÙØµÙ„Ù‡Ø§ Ø°ÙƒÙŠØ§Ù‹' : ''}
      </div>
      
      <h4 class="section-title">ğŸ¤– Ù…Ù‚ØªØ±Ø­Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (${aiTasks.length} Ù…Ù‡Ù…Ø©)</h4>
      ${aiTasks.map((task, i) => `
        <div class="ai-suggest">
          <div style="font-size:16px;line-height:1.5;">
            <strong>${task.verb}</strong> ${task.domain}
          </div>
          <div style="font-size:14px;color:#1565c0;margin:8px 0;">
            ğŸ“‹ Ø§Ù„Ø£Ø¯Ø§Ø©: <strong>${task.tool}</strong>
          </div>
          <div style="font-size:14px;color:#2e7d32;margin-bottom:12px;">
            ğŸ¯ Ø§Ù„Ù…Ø®Ø±Ø¬: <strong>${task.output}</strong>
          </div>
          <div>
            <button class="btn-secondary" onclick="approve('${task.full.replace(/'/g, "\\'").replace(/"/g, '\\"')}')" style="font-size:15px;padding:12px 24px;">
              âœ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØµÙŠØ§ØºØ© ${i+1}
            </button>
          </div>
        </div>
      `).join('')}
    </div>
  `;
}

function approve(text) {
  const list = document.getElementById("approvedList");
  const div = document.createElement("div");
  div.className = "approved";
  div.innerHTML = `<strong>âœ… ${text}</strong>`;
  list.insertBefore(div, list.firstChild);
  list.scrollIntoView({behavior: 'smooth'});
  // ØµÙˆØª ØªØ£ÙƒÙŠØ¯
  new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMc').play().catch(()=>{});
}

function clearAll() {
  document.getElementById("input").value = "";
  document.getElementById("results").innerHTML = "";
  document.getElementById("approvedList").innerHTML = "";
}
</script>
</body>
</html>
