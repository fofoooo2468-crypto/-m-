<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø£Ø¯Ø§Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© (ØµØ§Ø±Ù…Ø©)</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5ede3;
  padding: 24px;
}
.container { max-width: 1100px; margin: auto; }
.panel, .card {
  background: #fff;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 16px;
}
textarea {
  width: 100%;
  min-height: 120px;
  padding: 10px;
}
button {
  padding: 10px 16px;
  cursor: pointer;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
  font-size: 13px;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}
th { background: #eee; }

.note {
  background:#f9f5ef;
  padding:10px;
  border-radius:8px;
  margin-top:10px;
}
</style>
</head>

<body>
<div class="container">

<h2>ğŸ§  Ø£Ø¯Ø§Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ© (Ø¨Ø¯ÙˆÙ† Ø§ÙØªØ±Ø§Ø¶Ø§Øª)</h2>

<div class="panel">
<textarea id="input" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù‡Ù…Ø© Ø£Ùˆ Ø£ÙƒØ«Ø± (ÙƒÙ„ Ù…Ù‡Ù…Ø© Ø¨Ø³Ø·Ø±)..."></textarea><br>
<button onclick="analyze()">ØªØ­Ù„ÙŠÙ„</button>
</div>

<div id="result"></div>

</div>

<script>
// Ù‚ÙˆØ§Ø¦Ù… Ø§Ø³ØªÙƒØ´Ø§Ù ÙÙ‚Ø· (Ù„Ø§ ØªÙØ³ØªØ®Ø¯Ù… Ù„Ù„Ø¥Ø¶Ø§ÙØ©)
const VERBS = [
  "ØªÙ†ÙÙŠØ°","Ù…Ø±Ø§Ø¬Ø¹Ø©","ØªÙ†Ø¸ÙŠÙ…","Ø¥Ø´Ø±Ø§Ù","Ø±Ù‚Ø§Ø¨Ø©",
  "ØªÙ‚ÙŠÙŠÙ…","ØªÙ‚ÙˆÙŠÙ…","Ø§Ø¹ØªÙ…Ø§Ø¯","Ø¥Ø¯Ø§Ø±Ø©","ØªØ·ÙˆÙŠØ±","Ù…ØªØ§Ø¨Ø¹Ø©"
];

const TOOLS = ["Ù„ÙˆØ§Ø¦Ø­","Ø³ÙŠØ§Ø³Ø§Øª","Ø£Ø·Ø±","Ù…Ø¹Ø§ÙŠÙŠØ±","Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"];
const OUTPUTS = ["ØªÙ‚Ø±ÙŠØ±","Ù†ØªØ§Ø¦Ø¬","Ù…Ø³ØªÙˆÙ‰","ØªÙˆØµÙŠØ§Øª","Ù‚Ø±Ø§Ø±Ø§Øª","Ø¨Ø±Ø§Ù…Ø¬"];

function analyze() {
  const input = document.getElementById("input").value.trim();
  const box = document.getElementById("result");
  box.innerHTML = "";
  if (!input) return;

  const lines = input.split(/\n+/).filter(Boolean);

  lines.forEach((line, idx) => {
    const verbs = findItems(line, VERBS);
    const tools = findItems(line, TOOLS);
    const outputs = findItems(line, OUTPUTS);

    // ØªÙ‚Ø³ÙŠÙ… ØµØ§Ø±Ù…: ÙƒÙ„ ÙØ¹Ù„ = Ù…Ù‡Ù…Ø©
    if (verbs.length > 0) {
      verbs.forEach((verb, i) => {
        box.innerHTML += renderTask({
          index: `${idx + 1}.${i + 1}`,
          verb: verb,
          domain: extractDomain(line, verb),
          tool: tools[0] || "-",
          output: outputs[0] || "-"
        });
      });
    } else {
      // Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ¹Ù„ = Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ù†Ø§Ù‚ØµØ©
      box.innerHTML += renderTask({
        index: idx + 1,
        verb: "-",
        domain: line || "-",
        tool: tools[0] || "-",
        output: outputs[0] || "-"
      });
    }
  });
}

// Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨Ø¯ÙˆÙ† Ø§ÙØªØ±Ø§Ø¶
function findItems(text, list) {
  return list.filter(item => text.includes(item));
}

// Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¬Ø§Ù„ Ø­Ø±ÙÙŠÙ‹Ø§ ÙÙ‚Ø·
function extractDomain(text, verb) {
  if (!verb || verb === "-") return "-";
  let d = text.replace(verb, "").trim();
  d = d.replace(/^Ùˆ|ØŒ/g, "").trim();
  return d || "-";
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ù…Ø©
function renderTask(data) {
  return `
  <div class="card">
    <h3>Ø§Ù„Ù…Ù‡Ù…Ø© ${data.index}</h3>

    <table>
      <tr>
        <th>Ø§Ù„ÙØ¹Ù„</th>
        <th>Ø§Ù„Ù…Ø¬Ø§Ù„</th>
        <th>Ø§Ù„Ø£Ø¯Ø§Ø©</th>
        <th>Ø§Ù„Ù…Ø®Ø±Ø¬</th>
      </tr>
      <tr>
        <td>${data.verb}</td>
        <td>${data.domain}</td>
        <td>${data.tool}</td>
        <td>${data.output}</td>
      </tr>
    </table>

    <div class="note">
      <strong>âœï¸ Ù…Ù‚ØªØ±Ø­ ØµÙŠØ§ØºØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ â€“ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¬Ø¯ÙˆÙ„):</strong><br>
      ${buildSuggestion(data)}
    </div>
  </div>
  `;
}

// Ø§Ù„Ù…Ù‚ØªØ±Ø­ ÙÙ‚Ø· Ù‡Ù†Ø§ (ØºÙŠØ± Ù…Ù„Ø²Ù…)
function buildSuggestion(d) {
  let parts = [];
  if (d.verb !== "-") parts.push(d.verb);
  if (d.domain !== "-") parts.push(d.domain);
  if (d.tool === "-") parts.push("Ù…Ù† Ø®Ù„Ø§Ù„ Ø£Ø¯Ø§Ø© ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø©");
  if (d.output === "-") parts.push("Ø¨Ù…Ø§ ÙŠÙ†ØªØ¬ Ø¹Ù†Ù‡ Ù…Ø®Ø±Ø¬ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù‚ÙŠØ§Ø³");
  return parts.join(" ");
}
</script>

</body>
</html>
