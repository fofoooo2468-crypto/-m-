<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>أداة تحليل وتقييم المهام</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #f5ede3;
  --card: #ffffff;
  --border: #e0d6c8;
  --gold: #d7a562;
  --navy: #174766;
  --ink: #00080b;
  --radius: 10px;
  --shadow: 0 2px 6px rgba(0,0,0,.08);
}

body {
  font-family: "Cairo", sans-serif;
  background: var(--bg);
  margin: 0;
  padding: 24px;
  color: var(--ink);
}

.container {
  max-width: 1000px;
  margin: auto;
}

.panel {
  background: var(--card);
  padding: 16px;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

textarea {
  width: 100%;
  height: 120px;
  padding: 12px;
  font-family: inherit;
  font-size: 14px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.actions {
  margin-top: 10px;
  display: flex;
  gap: 8px;
}

button {
  padding: 8px 14px;
  font-family: inherit;
  font-size: 13px;
  border-radius: var(--radius);
  cursor: pointer;
  border: none;
}

.btn-primary { background: var(--gold); }
.btn-secondary { background: var(--navy); color:#fff; }
.btn-ghost { background: transparent; border:1px solid var(--border); }

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 16px;
  background: var(--card);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
}

th, td {
  border: 1px solid var(--border);
  padding: 8px;
  vertical-align: top;
}

th {
  background: #f1e8dc;
  text-align: center;
}

.ok { color:#0a6b34; font-size:12px; }
.warn { color:#b00000; font-size:12px; }
</style>
</head>

<body>

<div class="container">

  <div class="panel">
    <h3>أدخل مهمة أو أكثر (كل مهمة بسطر):</h3>
    <textarea id="input"></textarea>

    <div class="actions">
      <button class="btn-primary" onclick="analyze()">تحليل</button>
      <button class="btn-ghost" onclick="clearAll()">مسح</button>
      <button class="btn-secondary" onclick="copyTable()">نسخ</button>
    </div>
  </div>

  <table id="resultTable">
    <thead>
      <tr>
        <th>الفعل</th>
        <th>المجال</th>
        <th>الأداة</th>
        <th>المخرج</th>
        <th>التقييم</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

</div>

<script>
const verbs = [
  "تنظيم","إشراف","رقابة","متابعة","تنفيذ","تطوير",
  "تقويم","تقييم","اعتماد","إدارة","مراجعة","إعداد","تحليل"
];

function analyze(){
  const tbody = document.querySelector("#resultTable tbody");
  tbody.innerHTML = "";

  const lines = document.getElementById("input").value
    .split("\n").map(l=>l.trim()).filter(Boolean);

  lines.forEach(line=>{
    let فعل="-", مجال="-", أداة="-", مخرج="-";
    let checklist = [];

    const foundVerbs = verbs.filter(v=>line.includes(v));

    if(foundVerbs.length){
      فعل = foundVerbs[0];
      مجال = line.replace(فعل,"").trim() || "-";
      checklist.push(`<div class="ok">✓ فعل محدد</div>`);
    } else {
      checklist.push(`<div class="warn">⚠ لا يوجد فعل صريح</div>`);
    }

    if(foundVerbs.length>1){
      checklist.push(`<div class="warn">⚠ يُقترح تقسيم المهمة (أكثر من فعل)</div>`);
    }

    if(line.includes("من خلال")||line.includes("وفق")){
      أداة = line.split(/من خلال|وفق/)[1]?.trim()||"-";
      checklist.push(`<div class="ok">✓ أداة مذكورة</div>`);
    } else {
      checklist.push(`<div class="warn">⚠ لا توجد أداة</div>`);
    }

    if(line.includes("لتحقيق")||line.includes("بما")){
      مخرج = line;
      checklist.push(`<div class="ok">✓ مخرج موجود</div>`);
    } else {
      checklist.push(`<div class="warn">⚠ لا يوجد مخرج</div>`);
    }

    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${فعل}</td>
      <td>${مجال}</td>
      <td>${أداة}</td>
      <td>${مخرج}</td>
      <td>${checklist.join("")}</td>
    `;
    tbody.appendChild(tr);
  });
}

function clearAll(){
  document.getElementById("input").value="";
  document.querySelector("#resultTable tbody").innerHTML="";
}

function copyTable(){
  let text="";
  document.querySelectorAll("#resultTable tbody tr").forEach(r=>{
    text+=Array.from(r.children).map(c=>c.innerText.replace(/\n/g," | ")).join("\t")+"\n";
  });
  navigator.clipboard.writeText(text);
}
</script>

</body>
</html>
